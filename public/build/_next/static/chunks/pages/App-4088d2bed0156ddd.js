(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{3378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var s=n(7876),a=n(9794),l=n(1494),r=n(9017),i=n(4538),c=n(4933),o=n(7455),d=n(2639),h=n(5692),x=n(4419);let u=e=>{let{events:t=[],label:n=""}=e,u={loading:d.A,finished:h.A,failed:x.A},f=e=>e?(0,s.jsxs)(a.A,{variant:"caption",children:[(0,s.jsx)("br",{}),"Latency: ",e," ms"]}):null;return(0,s.jsx)(i.A,{variant:"outlined",sx:{display:"flex",flexGrow:1,maxHeight:"100%",overflow:"auto"},children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(a.A,{gutterBottom:!0,children:n}),(0,s.jsx)(o.A,{}),(e=>0===e.length?(0,s.jsx)(a.A,{children:"No Events in progress."}):e.map(e=>{let{status:t,label:n,color:a,latency:i}=e,c=u[t];return(0,s.jsxs)(l.A,{children:[(0,s.jsx)(r.A,{label:n,icon:(0,s.jsx)(c,{}),color:a}),f(i)]})}))(t)]})})}},5124:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var s=n(7876),a=n(2340),l=n(4538),r=n(4933),i=n(9794);function c(e){let{dataIndex:t,series:n}=e,a=n[0].data[t],c=n[1].data[t],o=100*a/c-100;return(0,s.jsx)(l.A,{sx:{minWidth:275},children:(0,s.jsxs)(r.A,{children:[(0,s.jsx)(i.A,{gutterBottom:!0,sx:{color:"text.secondary",fontSize:14},children:"Latency"}),(0,s.jsxs)(i.A,{children:["Rest latency: ",a," ms"]}),(0,s.jsxs)(i.A,{children:["Grpc latency: ",c," ms"]}),(0,s.jsxs)(i.A,{children:["difference (%): ",o.toFixed(2)," %"]})]})})}let o=e=>{let{data:t=[],display:n=!1,sx:l={}}=e;return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(a.b,{series:t,width:1e3,height:300,sx:l,slots:{axisContent:c}}):(0,s.jsx)(i.A,{variant:"h4",children:"Waiting for data."})})}},5340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var s=n(7876);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return{status:"loading",label:e,color:t}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";return{status:"finished",label:e,color:t}}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";return{status:"failed",label:e,color:t}}var i=n(4232),c=n(1494),o=n(2038),d=n(2232),h=n(7259),x=n(1755),u=n(9794),f=n(3378),g=n(5124);let j=(e=>{let t=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s={method:t};null!=n&&(s.body=JSON.stringify(n));try{let t=await fetch(e,s);if(!t.ok)throw Error("Response status: ".concat(t.status));return await t.json()}catch(e){console.log(e),console.log(e)}};return{pingRest:async n=>t("".concat(e,"/ping/rest?count=").concat(n)),pingGrpc:async n=>t("".concat(e,"/ping/grpc?count=").concat(n))}})("http://127.0.0.1:8080"),A=function(){let[e,t]=(0,i.useState)(!1),[n,A]=(0,i.useState)(!1),[p,y]=(0,i.useState)(10),[v,w]=(0,i.useState)(10),[b,m]=(0,i.useState)({}),[S,E]=(0,i.useState)({}),R=async e=>{b[e]=a("Pinging server..."),m({...b});let t=Date.now();try{await j.pingRest(v);let n=Date.now()-t,s=l("Done!");s.latency=n,b[e]=s,m({...b})}catch(s){console.log("There was an error: ".concat(s));let n=r("Error!");n.latency=Date.now()-t,b[e]=n,m({...b})}},_=async e=>{S[e]=a("Pinging server..."),E({...S});let t=Date.now();try{await j.pingGrpc(v);let n=Date.now()-t,s=l("Done!");s.latency=n,S[e]=s,E({...S})}catch(s){console.log("There was an error: ".concat(s));let n=r("Error!");n.latency=Date.now()-t,S[e]=n,E({...S})}},z=async e=>{for(let t=0;t<e;t++)await R(t)},C=async e=>{for(let t=0;t<e;t++)await _(t)};(0,i.useEffect)(()=>{n&&(t(!1),Promise.all([z(p),C(p)]).then(()=>{A(!1),t(!0)}))},[n]);let D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(let[n,s]of Object.entries(e))t.push(s.latency);return t},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=[];for(let[s,a]of Object.entries(e))t+=a.latency,n.push(t);return n},k={flexGrow:1,display:"flex"};return(0,s.jsxs)(c.A,{sx:{height:"calc(100vh - 152px)",display:"flex",flexDirection:"column"},children:[(0,s.jsxs)(o.A,{container:!0,spacing:2,children:[(0,s.jsx)(o.A,{size:2,children:(0,s.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,s.jsx)(h.A,{variant:"standard",value:p,onChange:e=>y(e.target.value),label:"Client Requests"})})}),(0,s.jsx)(o.A,{size:2,children:(0,s.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,s.jsx)(h.A,{variant:"standard",value:v,onChange:e=>w(e.target.value),label:"Server Requests"})})}),(0,s.jsx)(o.A,{size:8,children:(0,s.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,s.jsx)(x.A,{variant:"contained",onClick:()=>{m({}),E({}),A(!0)},children:"Test Ping"})})})]}),(0,s.jsxs)(o.A,{container:!0,spacing:2,sx:{height:"46vh",overflow:"auto",flexGrow:1},children:[(0,s.jsx)(o.A,{size:2,sx:{...k,maxHeight:"100%"},children:(0,s.jsx)(f.default,{label:"REST Status",events:Object.keys(b).map(e=>b[e])})}),(0,s.jsx)(o.A,{size:2,sx:{...k,maxHeight:"100%"},children:(0,s.jsx)(f.default,{label:"GRPC Status",events:Object.keys(S).map(e=>S[e])})}),(0,s.jsxs)(o.A,{size:8,sx:{...k,flexDirection:"column"},children:[(0,s.jsx)(o.A,{size:12,sx:k,children:(0,s.jsxs)(o.A,{size:12,children:[(0,s.jsx)(u.A,{variant:"h5",children:"Latency per request."}),(0,s.jsx)(g.default,{data:[{data:D(b),label:"REST"},{data:D(S),label:"gRPC"}],display:e})]})}),(0,s.jsx)(o.A,{size:12,sx:k,children:(0,s.jsxs)(o.A,{size:12,children:[(0,s.jsx)(u.A,{variant:"h5",children:"Aggregated latency."}),(0,s.jsx)(g.default,{data:[{data:P(b),label:"REST"},{data:P(S),label:"gRPC"}],display:e})]})})]})]})]})}},9045:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/App",function(){return n(5340)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[144,347,467,302,636,593,792],()=>t(9045)),_N_E=e.O()}]);