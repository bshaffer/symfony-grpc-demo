(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{3378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>x});var a=n(7876),s=n(9794),l=n(1494),r=n(9017),i=n(4538),c=n(4933),o=n(7455),d=n(2639),h=n(5692),u=n(4419);let x=e=>{let{events:t=[],label:n=""}=e,x={loading:d.A,finished:h.A,failed:u.A},g=e=>e?(0,a.jsxs)(s.A,{variant:"caption",children:[(0,a.jsx)("br",{}),"Latency: ",e," ms"]}):null;return(0,a.jsx)(i.A,{variant:"outlined",sx:{display:"flex",flexGrow:1,maxHeight:"100%",overflow:"auto"},children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(s.A,{gutterBottom:!0,children:n}),(0,a.jsx)(o.A,{}),(e=>0===e.length?(0,a.jsx)(s.A,{children:"No Events in progress."}):e.map(e=>{let{status:t,label:n,color:s,latency:i}=e,c=x[t];return(0,a.jsxs)(l.A,{children:[(0,a.jsx)(r.A,{label:n,icon:(0,a.jsx)(c,{}),color:s}),g(i)]})}))(t)]})})}},5124:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var a=n(7876),s=n(2340),l=n(9794);let r=e=>{let{data:t=[],display:n=!1}=e;return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)(s.b,{series:t,width:1e3,height:300}):(0,a.jsx)(l.A,{variant:"h4",children:"Waiting for data."})})}},5340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(7876);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"primary";return{status:"loading",label:e,color:t}}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";return{status:"finished",label:e,color:t}}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";return{status:"failed",label:e,color:t}}var i=n(4232),c=n(1494),o=n(2038),d=n(2232),h=n(7259),u=n(1755),x=n(9794),g=n(3378),f=n(5124);let j=(e=>{let t=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};null!=n&&(a.body=JSON.stringify(n));try{let t=await fetch(e,a);if(!t.ok)throw Error("Response status: ".concat(t.status));return await t.json()}catch(e){console.log(e),console.log(e)}};return{pingRest:async n=>t("".concat(e,"/ping/rest?count=").concat(n)),pingGrpc:async n=>t("".concat(e,"/ping/grpc?count=").concat(n))}})("http://127.0.0.1:8080"),p=function(){let[e,t]=(0,i.useState)(!1),[n,p]=(0,i.useState)(!1),[A,v]=(0,i.useState)(10),[y,w]=(0,i.useState)(10),[b,m]=(0,i.useState)({}),[E,S]=(0,i.useState)({}),_=async e=>{b[e]=s("Pinging server..."),m({...b});let t=Date.now();try{await j.pingRest(y);let n=Date.now()-t,a=l("Done!");a.latency=n,b[e]=a,m({...b})}catch(a){console.log("There was an error: ".concat(a));let n=r("Error!");n.latency=Date.now()-t,b[e]=n,m({...b})}},R=async e=>{E[e]=s("Pinging server..."),S({...E});let t=Date.now();try{await j.pingGrpc(y);let n=Date.now()-t,a=l("Done!");a.latency=n,E[e]=a,S({...E})}catch(a){console.log("There was an error: ".concat(a));let n=r("Error!");n.latency=Date.now()-t,E[e]=n,S({...E})}},z=async e=>{for(let t=0;t<e;t++)await _(t)},D=async e=>{for(let t=0;t<e;t++)await R(t)};(0,i.useEffect)(()=>{n&&(t(!1),Promise.all([z(A),D(A)]).then(()=>{p(!1),t(!0)}))},[n]);let C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(let[n,a]of Object.entries(e))t.push(a.latency);return t},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=[];for(let[a,s]of Object.entries(e))t+=s.latency,n.push(t);return n},k={flexGrow:1,display:"flex"};return(0,a.jsxs)(c.A,{sx:{height:"calc(100vh - 152px)",display:"flex",flexDirection:"column"},children:[(0,a.jsxs)(o.A,{container:!0,spacing:2,children:[(0,a.jsx)(o.A,{size:2,children:(0,a.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,a.jsx)(h.A,{variant:"standard",value:A,onChange:e=>v(e.target.value),label:"Client Requests"})})}),(0,a.jsx)(o.A,{size:2,children:(0,a.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,a.jsx)(h.A,{variant:"standard",value:y,onChange:e=>w(e.target.value),label:"Server Requests"})})}),(0,a.jsx)(o.A,{size:8,children:(0,a.jsx)(d.A,{sx:{m:1,display:"flex"},children:(0,a.jsx)(u.A,{variant:"contained",onClick:()=>{m({}),S({}),p(!0)},children:"Test Ping"})})})]}),(0,a.jsxs)(o.A,{container:!0,spacing:2,sx:{height:"46vh",overflow:"auto",flexGrow:1},children:[(0,a.jsx)(o.A,{size:2,sx:{...k,maxHeight:"100%"},children:(0,a.jsx)(g.default,{label:"REST Status",events:Object.keys(b).map(e=>b[e])})}),(0,a.jsx)(o.A,{size:2,sx:{...k,maxHeight:"100%"},children:(0,a.jsx)(g.default,{label:"GRPC Status",events:Object.keys(E).map(e=>E[e])})}),(0,a.jsxs)(o.A,{size:8,sx:{...k,flexDirection:"column"},children:[(0,a.jsx)(o.A,{size:12,sx:k,children:(0,a.jsxs)(o.A,{size:12,children:[(0,a.jsx)(x.A,{variant:"h5",children:"Latency per request."}),(0,a.jsx)(f.default,{data:[{data:C(b),label:"REST"},{data:C(E),label:"gRPC"}],display:e})]})}),(0,a.jsx)(o.A,{size:12,sx:k,children:(0,a.jsxs)(o.A,{size:12,children:[(0,a.jsx)(x.A,{variant:"h5",children:"Aggregated latency."}),(0,a.jsx)(f.default,{data:[{data:P(b),label:"REST"},{data:P(E),label:"gRPC"}],display:e})]})})]})]})]})}},9045:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/App",function(){return n(5340)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[991,340,596,302,636,593,792],()=>t(9045)),_N_E=e.O()}]);